spring.application.name=persfinance
server.port=8081
# Dados de conexão
# Use environment variables to allow running both locally and in Docker-compose.
# Defaults: DB_HOST=localhost, DB_PORT=5432, DB_NAME=persfinance
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:financas_db}
# Prefer standard Spring env vars if present, then DB_* vars, then the old pf_user/pf_pass defaults
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:${DB_USER:postgres}}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:${DB_PASS:postgres}}

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# JWT
jwt.secret=${JWT_SECRET:change_me_in_dev}
jwt.expiration-ms=${JWT_EXP_MS:3600000}

# Application
app.client-base-url=${APP_CLIENT_BASE_URL:http://localhost:3000}

# NOTE: Keycloak resource-server JWT configuration moved to application.yml (single source of truth).
# spring.security.oauth2.resourceserver.jwt.issuer-uri=...
spring.security.oauth2.resourceserver.jwt.issuer-uri=${SPRING_SECURITY_OAUTH2_RESOURCESERVER_JWT_ISSUER_URI:http://localhost:8080/realms/${KEYCLOAK_REALM:Persfin}}
# keycloak.* endpoints remain here only if used by AuthController for token exchange.

# Keycloak client (for ROPC or server-to-server token exchange; optional)
keycloak.client-id=${KEYCLOAK_CLIENT_ID:personal-finance-api}
keycloak.client-secret=${KEYCLOAK_CLIENT_SECRET:personal-finance-secret}
keycloak.token-uri=${KEYCLOAK_TOKEN_URI:http://keycloak:8080/realms/${KEYCLOAK_REALM:Persfin}/protocol/openid-connect/token}

# Keycloak Admin Configuration
keycloak.admin-base=${KEYCLOAK_ADMIN_BASE:http://keycloak:8080/admin/realms/${KEYCLOAK_REALM:Persfin}}
keycloak.admin-token-uri=${KEYCLOAK_ADMIN_TOKEN_URI:http://keycloak:8080/realms/master/protocol/openid-connect/token}

keycloak.admin-client-id=${KEYCLOAK_ADMIN_CLIENT_ID:admin-cli}

# Admin Credentials
keycloak.admin.username=admin
keycloak.admin.password=admin
